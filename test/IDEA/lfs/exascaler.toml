version = "6.3.2-2024122100"

[global]
name = "idea_cluster"
id = "3815f570-771d-4a93-bbfd-b0677d28a592"
ntp_list = ["192.168.89.205"]
domain_name = "scc.idea"

[global.mgt]
list = ["vm00", "vm01"]
size = "2G"
mount_opts = "max_sectors_kb=0"
device_path = "/dev/ddn"
mmp_interval = "5s"
failback = true

[sfa.ES400X2-1]
controllers = ["192.168.89.1", "192.168.89.2"]

[sfa.ES400X2-2]
controllers = ["192.168.89.3", "192.168.89.4"]

[sfa.ES400X2-3]
controllers = ["192.168.89.5", "192.168.89.6"]

[sfa.ES400X2-4]
controllers = ["192.168.89.7", "192.168.89.8"]

[HA]
groups = [
  [
    "vm00",
    "vm01",
    "vm02",
    "vm03",
  ],
  [
    "vm04",
    "vm05",
    "vm06",
    "vm07",
  ],
  [
    "vm08",
    "vm09",
    "vm10",
    "vm11",
  ],
  [
    "vm12",
    "vm13",
    "vm14",
    "vm15",
  ],
]
ifspeed = true
pingd = true
secauth = true
start_on_boot = true

[fs.lfs.mdt]
list = [
  "vm00",
  "vm01",
  "vm02",
  "vm03",
  "vm04",
  "vm05",
  "vm06",
  "vm07",
  "vm08",
  "vm09",
  "vm10",
  "vm11",
  "vm12",
  "vm13",
  "vm14",
  "vm15",
]
size = "90%"
mke2fs_opts = "-m1 -E lazy_itable_init=0,lazy_journal_init=0,nodiscard -O project,large_dir"
mount_opts = "max_sectors_kb=0"
device_path = "/dev/ddn"
failback = true

[fs.lfs.ost]
list = [
  "vm00",
  "vm01",
  "vm02",
  "vm03",
  "vm04",
  "vm05",
  "vm06",
  "vm07",
  "vm08",
  "vm09",
  "vm10",
  "vm11",
  "vm12",
  "vm13",
  "vm14",
  "vm15",
]
mke2fs_opts = "-m1 -i 131072 -E lazy_itable_init=0,lazy_journal_init=0,nodiscard -O project"
mke2fs_opts_conditional = [
  "for size > 128000000000000 apply '-E lazy_itable_init=1,nodiscard -N 1073741824 -O project'",
]
mount_opts = "max_sectors_kb=0"
device_path = "/dev/ddn"
mmp_interval = "5s"
failback = true

[fs.lfs.pool]
ddn_es400_1 = [0, 1, 2, 3, 4, 5, 6, 7]
ddn_es400_1_2 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
ddn_es400_1_2_3 = [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  12,
  13,
  14,
  15,
  16,
  17,
  18,
  19,
  20,
  21,
  22,
  23,
]
ddn_es400_2 = [8, 9, 10, 11, 12, 13, 14, 15]
ddn_es400_3 = [16, 17, 18, 19, 20, 21, 22, 23]
ddn_es400_3_4 = [16, 17, 18, 19, 20, 21, 22, 23, 32, 33, 34, 35, 36, 37, 38, 39]
ddn_es400_4 = [32, 33, 34, 35, 36, 37, 38, 39]
ddn_hdd = [24, 25, 26, 27, 28, 29, 30, 31, 40, 41, 42, 43, 44, 45, 46, 47]
ddn_hdd_1 = [24, 25, 26, 27, 28, 29, 30, 31]
ddn_ssd = [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  12,
  13,
  14,
  15,
  16,
  17,
  18,
  19,
  20,
  21,
  22,
  23,
  32,
  33,
  34,
  35,
  36,
  37,
  38,
  39,
]

[host_defaults]
corosync_links = ["mgmt0", "mgmt1"]
grub_args = "spectre_v2=off nopti"
lnets = ["o2ib0(mlxib0)", "tcp0(mlxen0)"]
fqdn = "duplicated"

[host_defaults.stonith]
type = "sfa_vm"
timeout = "5m"

[host_defaults.nic.mgmt0]
dad_timeout = 3000
type = "ethernet"
netmask = "255.255.255.0"
gateway = "192.168.89.254"

[host_defaults.nic.mgmt1]
dad_timeout = 3000
type = "ethernet"
netmask = "255.255.255.0"

[host_defaults.nic.mlxib0]
dad_timeout = 3000
type = "infiniband"
netmask = "255.255.0.0"

[host_defaults.nic.mlxen0]
dad_timeout = 3000
type = "ethernet"
netmask = "255.255.255.0"

[host_defaults.nic.mlxen0.cfg.ethernet]
mtu = "9000"

[host_defaults.sysctl]
"vm.min_free_kbytes" = 2097152
"net.ipv4.conf.all.rp_filter" = 0
"net.ipv4.conf.all.arp_announce" = 2
"net.ipv4.conf.all.arp_ignore" = 1
"net.ipv4.conf.default.rp_filter" = 2
"net.ipv4.conf.default.arp_announce" = 2
"net.ipv4.conf.default.arp_ignore" = 1

[set_param_tunings]
"obdfilter.*.brw_size" = 16
"osd-ldiskfs.*.writethrough_cache_enable" = 0
"osd-ldiskfs.*.read_cache_enable" = 0
"osc.*.max_pages_per_rpc" = "16M"
"osc.*.max_rpcs_in_flight" = 8
"osc.*.max_dirty_mb" = 512
"llite.*.max_read_ahead_mb" = 2048
"lfs.quota.mdt" = "ugp"
"lfs.quota.ost" = "ugp"

[host.vm00]
oid = "0x10000000"
sfa = "ES400X2-1"

[host.vm00.fs.lfs]
mdt_list = [0]
ost_list = [0, 1]

[host.vm00.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.65"

[host.vm00.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.65"

[host.vm00.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.1"

[host.vm00.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.1"

[host.vm00.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm01]
oid = "0x10008000"
sfa = "ES400X2-1"

[host.vm01.fs.lfs]
ost_list = [2, 3]

[host.vm01.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.66"

[host.vm01.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.66"

[host.vm01.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.2"

[host.vm01.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.2"

[host.vm01.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm02]
oid = "0x10000001"
sfa = "ES400X2-1"

[host.vm02.fs.lfs]
ost_list = [4, 5]

[host.vm02.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.67"

[host.vm02.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.67"

[host.vm02.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.3"

[host.vm02.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.3"

[host.vm02.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm03]
oid = "0x10008001"
sfa = "ES400X2-1"

[host.vm03.fs.lfs]
mdt_list = [1]
ost_list = [6, 7]

[host.vm03.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.68"

[host.vm03.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.68"

[host.vm03.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.4"

[host.vm03.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.4"

[host.vm03.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm04]
oid = "0x10000000"
sfa = "ES400X2-2"

[host.vm04.fs.lfs]
mdt_list = [2]
ost_list = [8, 9]

[host.vm04.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.69"

[host.vm04.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.69"

[host.vm04.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.5"

[host.vm04.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.5"

[host.vm04.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm05]
oid = "0x10008000"
sfa = "ES400X2-2"

[host.vm05.fs.lfs]
ost_list = [10, 11]

[host.vm05.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.70"

[host.vm05.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.70"

[host.vm05.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.6"

[host.vm05.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.6"

[host.vm05.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm06]
oid = "0x10000001"
sfa = "ES400X2-2"

[host.vm06.fs.lfs]
ost_list = [12, 13]

[host.vm06.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.71"

[host.vm06.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.71"

[host.vm06.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.7"

[host.vm06.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.7"

[host.vm06.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm07]
oid = "0x10008001"
sfa = "ES400X2-2"

[host.vm07.fs.lfs]
mdt_list = [3]
ost_list = [14, 15]

[host.vm07.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.72"

[host.vm07.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.72"

[host.vm07.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.8"

[host.vm07.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.8"

[host.vm07.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm08]
oid = "0x10000000"
sfa = "ES400X2-3"

[host.vm08.fs.lfs]
mdt_list = [4]
ost_list = [16, 17, 24, 25]

[host.vm08.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.73"

[host.vm08.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.73"

[host.vm08.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.9"

[host.vm08.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.9"

[host.vm08.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm09]
oid = "0x10008000"
sfa = "ES400X2-3"

[host.vm09.fs.lfs]
ost_list = [18, 19, 26, 27]

[host.vm09.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.74"

[host.vm09.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.74"

[host.vm09.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.10"

[host.vm09.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.10"

[host.vm09.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm10]
oid = "0x10000001"
sfa = "ES400X2-3"

[host.vm10.fs.lfs]
ost_list = [20, 21, 28, 29]

[host.vm10.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.75"

[host.vm10.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.75"

[host.vm10.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.11"

[host.vm10.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.11"

[host.vm10.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm11]
oid = "0x10008001"
sfa = "ES400X2-3"

[host.vm11.fs.lfs]
mdt_list = [5]
ost_list = [22, 23, 30, 31]

[host.vm11.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.76"

[host.vm11.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.76"

[host.vm11.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.12"

[host.vm11.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.12"

[host.vm11.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm12]
oid = "0x10000000"
sfa = "ES400X2-4"

[host.vm12.fs.lfs]
mdt_list = [6]
ost_list = [32, 33, 40, 41]

[host.vm12.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.77"

[host.vm12.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.77"

[host.vm12.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.13"

[host.vm12.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.13"

[host.vm12.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm13]
oid = "0x10008000"
sfa = "ES400X2-4"

[host.vm13.fs.lfs]
ost_list = [34, 35, 42, 43]

[host.vm13.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.78"

[host.vm13.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.78"

[host.vm13.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.14"

[host.vm13.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.14"

[host.vm13.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm14]
oid = "0x10000001"
sfa = "ES400X2-4"

[host.vm14.fs.lfs]
ost_list = [36, 37, 44, 45]

[host.vm14.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.79"

[host.vm14.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.79"

[host.vm14.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.15"

[host.vm14.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.15"

[host.vm14.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[host.vm15]
oid = "0x10008001"
sfa = "ES400X2-4"

[host.vm15.fs.lfs]
mdt_list = [7]
ost_list = [38, 39, 46, 47]

[host.vm15.nic.mgmt0]
type = "ethernet"
ip = "192.168.89.80"

[host.vm15.nic.mgmt1]
type = "ethernet"
ip = "172.16.0.80"

[host.vm15.nic.mlxib0]
type = "infiniband"
ip = "10.10.64.16"

[host.vm15.nic.mlxen0]
type = "ethernet"
ip = "192.168.90.16"

[host.vm15.backup]
paths = [
  "/etc/lamigo/",
  "/etc/lpurge/",
  "/etc/sssd/sssd.conf",
  "/etc/sssd/conf.d/",
  "/etc/openldap/ldap.conf",
  "/etc/openldap/certs/",
]

[EMF]
ip = "192.168.89.132"
nic = "mgmt0"
size = "80.0GiB"
